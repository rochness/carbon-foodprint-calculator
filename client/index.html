<!DOCTYPE html>
<html ng-app='calculator'>
  <head>
    <title>Carbon Foodprint Calculator</title>
    <link href='http://fonts.googleapis.com/css?family=Didact+Gothic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Arimo' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    
    <link rel="stylesheet" href="stylesheet.css">
  </head>

  <body>
    <div class = "header">
      <h1>Carbon Foodprint Calculator</h1>
    </div>
    <div>
      <div class= "row"> 
        <div class = "col-sm-6">
          <div class="calc_header">
            <h2>Intro Text...</h2>
            <span>Nequi dollendae vel iliscimi, cus molupta sperupt aut pro ommoluptati quiam 
            </span>
          </div>
          <div class = "select_ingreds" ng-controller = "SearchController">
            <div class = "enter_ingred">
              <form name="searchForm" ng-submit="setIngred()"> 
              Enter an ingredient: 
              <input type="text" name="ingred" ng-model="input" placeholder= "Type the name of an ingredient..."></form>
              <form name="quantityForm" ng-if="$scope.ingredient !== null && searchForm.$submitted === true" novalidate> 
              Enter quantity (in pounds):
              <input type="number" name="quantity" ng-model="item.quantity">
              <button class="add_button" ng-if="searchForm.$dirty" ng-click="addToList();searchForm.$setPristine(); quantityForm.$setPristine()"> Add ingredient </button>
              </form>
            </div>
            <div class = "browse">
              <div class = 'or'> OR </div>
              <div class="selectCat"> Search by category: </div>
              <div ng-switch="selected"> 
              <ul class="nav nav-stacked" ng-switch-when='false'>
                <li ng-repeat="category in categories.slice(0,4)">
                  <div class="btn-group dropright">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#" ng-model="category">
                   {{category}}
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    </a>
                    <ul class="dropdown-menu">
                      <li ng-repeat ="(ingred, ingObj) in allIngreds() | categoryFilter: category"><a ng-model="input" ng-click="setIngred(ingObj); toggleSelected()">{{ingObj.name}}</a></li>
                      <!-- <li><a href="#">Choice1</a></li>
                      <li><a href="#">Choice2</a></li>
                      <li><a href="#">Choice3</a></li>
                      <li class="divider"></li>
                      <li><a href="#">Choice..</a></li> -->
                    </ul>
                  </div>
                </li>
              </ul>
              <div class="browse_quantity" ng-switch-when='true'>
                <div class="browse_selection"> Your selection: {{item.ingredient.name}} </div>
                <form name="quantityForm" novalidate> 
                Enter quantity (in pounds):
                <input type="number" name="quantity" ng-model="item.quantity">
                <button class="add_button" ng-click="addToList(); quantityForm.$setPristine(); toggleSelected()"> Add ingredient </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
            
        
        <div class ="col-sm-6">
          <div class="calc_header"><h2>Your Ingredients </h2></div>
          <div id="foodprint">
          <h3>Emissions breakdown</h3>
          <div class = "breakdown" ng-controller = "UserIngredController">
          <table>
            <tr ng-repeat= "ingred in getUserIngreds()">
              <td>{{ingred.quantity}} pounds of {{ingred.ingredient.name}} </td>
              <td class ="emissions"> {{subTotal(ingred.quantity, ingred.ingredient.emissions)}} kg CO2e </td>
              <td class="emissions"> <button class="remove_button" value="remove" ng-click="remove(ingred)">Remove</button></td>
            </tr>
          </table>
          
          <h3>Total</h3>
          <p>Your carbon foodprint is {{total()}} kg of CO2e. That is the equivalent of driving {{miles()}} miles in a car.</p>
          <p></p>
          <p></p>
          <h3>Offset</h3>
          <p>You can purchase ${{costs()}} of carbon offsets to balance your emissions.</p>
          <p></p>
          <p></p>
          </div>
          </div>
        </div>
      </div>
    </div>
  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="../bower_components/angular/angular.js"></script>
    <script src="../bower_components/angular-route/angular-route.js"></script>

    <script src="app/app.js"></script>
    <script src="app/calculate/calculate.js"></script>
    <script src="app/ingredient/search.js"></script>
    <script src="app/services.js"></script>
  </body>
  <footer>
  	
  </footer>
</html>